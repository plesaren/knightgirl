
<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡πÄ‡∏Å‡∏°‡∏•‡∏≤‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏†‡∏≤‡∏û</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: sans-serif;
      background: #f0f0f0;
    }

    h1 {
      margin: 20px 0 10px;
      text-align: center;
    }

    p {
      text-align: center;
      margin-bottom: 10px;
    }

    #game-container {
      width: 90vw;
      height: 70vh;
      max-width: 1000px;
      max-height: 700px;
      border: 2px dashed #aaa;
      margin: 0 auto;
      position: relative;
      background: white;
      overflow: hidden;
    }

    .piece {
      position: absolute;
      cursor: grab;
      user-select: none;
      touch-action: none;
      max-width: 100%;
      height: auto;
    }

    .piece:active {
      cursor: grabbing;
    }

    @media (max-width: 600px) {
      h1 { font-size: 1.2em; }
      #game-container { width: 95vw; height: 60vh; }
    }

    .controls {
      text-align: center;
      margin-bottom: 10px;
    }

    .controls button, .controls input[type=range] {
      padding: 8px 12px;
      margin: 5px;
      font-size: 16px;
    }
  </style>
</head>
<body>

<h1>üß© ‡πÄ‡∏Å‡∏°‡∏•‡∏≤‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô - ‡∏Ç‡∏ô‡∏≤‡∏î‡∏à‡∏£‡∏¥‡∏á</h1>
<p>‡∏•‡∏≤‡∏Å ‡∏´‡∏°‡∏∏‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏•‡∏¥‡∏Å‡∏†‡∏≤‡∏û ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏û‡πÉ‡∏´‡∏°‡πà</p>

<div class="controls">
  <button onclick="flipHorizontally()">‚ÜîÔ∏è ‡∏Å‡∏•‡∏±‡∏ö‡∏ã‡πâ‡∏≤‡∏¢‚Äì‡∏Ç‡∏ß‡∏≤</button>
  <button onclick="flipVertically()">‚ÜïÔ∏è ‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡∏ô‚Äì‡∏•‡πà‡∏≤‡∏á</button>
  <label>üîÅ ‡∏´‡∏°‡∏∏‡∏ô:
    <input type="range" min="0" max="360" value="0" id="rotateSlider" oninput="rotateSelected(this.value)">
  </label>
</div>

<div id="game-container"></div>

<script>
  const images = [
    "1-yellow-big-triangle.png",
    "2-red-big-triangle.png",
    "3-purple-medium-triangle.png",
    "4-blue-small-triangle.png",
    "5-pink-small-triangle.png",
    "6-orange-parallelogram.png",
    "7-green-diamond.png"
  ];

  const container = document.getElementById('game-container');
  let selectedPiece = null;

  images.forEach((src) => {
    const img = document.createElement('img');
    img.src = src;
    img.className = 'piece';
    img.dataset.flipX = "1";
    img.dataset.flipY = "1";
    img.dataset.rotate = "0";

    img.onload = () => {
      const maxX = container.clientWidth - img.width;
      const maxY = container.clientHeight - img.height;
      img.style.left = Math.random() * maxX + 'px';
      img.style.top = Math.random() * maxY + 'px';
    };

    img.onclick = () => {
      selectedPiece = img;
      document.getElementById("rotateSlider").value = selectedPiece.dataset.rotate || 0;
    };

    makeDraggable(img);
    container.appendChild(img);
  });

  function makeDraggable(el) {
    let offsetX = 0, offsetY = 0;

    el.onmousedown = startDrag;
    el.ontouchstart = startDrag;

    function startDrag(e) {
      e.preventDefault();
      const isTouch = e.type === 'touchstart';
      const startX = isTouch ? e.touches[0].clientX : e.clientX;
      const startY = isTouch ? e.touches[0].clientY : e.clientY;
      const rect = el.getBoundingClientRect();
      offsetX = startX - rect.left;
      offsetY = startY - rect.top;

      document.onmousemove = document.ontouchmove = drag;
      document.onmouseup = document.ontouchend = endDrag;

      selectedPiece = el;
      document.getElementById("rotateSlider").value = selectedPiece.dataset.rotate || 0;
    }

    function drag(e) {
      const isTouch = e.type === 'touchmove';
      const clientX = isTouch ? e.touches[0].clientX : e.clientX;
      const clientY = isTouch ? e.touches[0].clientY : e.clientY;

      const x = clientX - container.getBoundingClientRect().left - offsetX;
      const y = clientY - container.getBoundingClientRect().top - offsetY;

      el.style.left = x + 'px';
      el.style.top = y + 'px';
    }

    function endDrag() {
      document.onmousemove = document.ontouchmove = null;
      document.onmouseup = document.ontouchend = null;
    }
  }

  function flipHorizontally() {
    if (!selectedPiece) return;
    selectedPiece.dataset.flipX *= -1;
    updateTransform(selectedPiece);
  }

  function flipVertically() {
    if (!selectedPiece) return;
    selectedPiece.dataset.flipY *= -1;
    updateTransform(selectedPiece);
  }

  function rotateSelected(angle) {
    if (!selectedPiece) return;
    selectedPiece.dataset.rotate = angle;
    updateTransform(selectedPiece);
  }

  function updateTransform(img) {
    const scaleX = img.dataset.flipX || 1;
    const scaleY = img.dataset.flipY || 1;
    const rotate = img.dataset.rotate || 0;
    img.style.transform = `scale(${scaleX}, ${scaleY}) rotate(${rotate}deg)`;
  }
</script>

</body>
</html>
